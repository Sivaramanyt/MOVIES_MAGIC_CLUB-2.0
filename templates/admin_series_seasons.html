{% extends "base.html" %}

{% block content %}
<section style="max-width:900px; margin:0 auto;">
  <h1 style="font-size:18px; font-weight:600; margin-bottom:6px;">
    Manage seasons
  </h1>

  {% if series %}
  <p style="font-size:12px; color:var(--text-muted); margin-bottom:10px;">
    {{ series.title }} — add or remove seasons.
  </p>
  {% endif %}

  {% if message %}
  <div style="font-size:12px; color:#22c55e; margin-bottom:8px;">
    {{ message }}
  </div>
  {% endif %}

  <div style="font-size:11px; margin-bottom:8px;">
    <a href="/admin/series"
       style="color:#38bdf8; text-decoration:none;">← Back to Series admin</a>
  </div>

  <!-- ADD SEASON FORM -->
  <article style="background:rgba(15,23,42,0.96); border-radius:18px;
                  border:1px solid rgba(148,163,184,0.4); padding:12px 14px; margin-bottom:12px;">
    <form action="/admin/series/{{ series_id }}/seasons" method="post">
      <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:10px;">
        <div>
          <label style="font-size:11px; color:var(--text-muted);">Season number</label>
          <input name="season_number" class="admin-input" required />
        </div>
        <div>
          <label style="font-size:11px; color:var(--text-muted);">Season name (optional)</label>
          <input name="season_title" class="admin-input" />
        </div>
        <div>
          <label style="font-size:11px; color:var(--text-muted);">Year (optional)</label>
          <input name="season_year" class="admin-input" placeholder="2024" />
        </div>
      </div>
      <div style="margin-top:10px; display:flex; justify-content:flex-end;">
        <button type="submit" class="admin-btn-primary">Add season</button>
      </div>
    </form>
  </article>

  <!-- SEASONS LIST -->
  <article style="background:rgba(15,23,42,0.96); border-radius:18px;
                  border:1px solid rgba(148,163,184,0.4); padding:12px 14px;">
    <div style="font-size:13px; font-weight:600; margin-bottom:6px;">
      Seasons
    </div>
    <table style="width:100%; border-collapse:collapse; font-size:11px;">
      <thead>
        <tr>
          <th style="text-align:left; padding:6px; color:var(--text-muted);">#</th>
          <th style="text-align:left; padding:6px; color:var(--text-muted);">Title</th>
          <th style="text-align:left; padding:6px; color:var(--text-muted);"></th>
        </tr>
      </thead>
      <tbody>
        {% for s in seasons %}
        <tr>
          <td style="padding:6px; border-top:1px solid rgba(51,65,85,0.8);">
            {{ s.number }}
          </td>
          <td style="padding:6px; border-top:1px solid rgba(51,65,85,0.8);">
            {{ s.title }}
          </td>
          <td style="padding:6px; border-top:1px solid rgba(51,65,85,0.8);">
            <a href="/admin/seasons/{{ s.id }}/episodes"
               style="font-size:11px; color:#38bdf8; text-decoration:none;">
              Manage episodes
            </a>
          </td>
        </tr>
        {% endfor %}
        {% if seasons|length == 0 %}
        <tr>
          <td colspan="3" style="padding:6px; color:var(--text-muted);">
            No seasons added yet.
          </td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </article>
</section>
{% endblock %}
