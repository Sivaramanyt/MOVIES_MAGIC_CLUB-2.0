{% extends "admin_base.html" %}
{% block title %}Series Admin – MOVIES MAGIC CLUB{% endblock %}

{% block content %}
<div class="admin-page">

  <!-- Top bar / breadcrumb -->
  <div class="admin-header">
    <h1>Series dashboard</h1>
    <a href="/admin/movies" class="btn btn-secondary">← Back to Movies admin</a>
  </div>

  <!-- Flash message -->
  {% if message %}
    <div class="alert alert-info" style="margin-top: 10px;">
      {{ message }}
    </div>
  {% endif %}

  <div class="admin-grid">
    <!-- LEFT: Existing series list -->
    <div class="admin-list">
      <h2>All series</h2>

      {% if series_list and series_list|length > 0 %}
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Poster</th>
              <th>Title</th>
              <th>Year</th>
              <th>Quality</th>
              <th>Languages</th>
            </tr>
          </thead>
          <tbody>
            {% for s in series_list %}
              <tr>
                <td>
                  {% if s.poster_path %}
                    <img src="{{ s.poster_path }}" alt="{{ s.title }}" style="height:60px;border-radius:4px;">
                  {% else %}
                    -
                  {% endif %}
                </td>
                <td>
                  <a href="/series/{{ s.id }}" target="_blank">
                    {{ s.title }}
                  </a>
                </td>
                <td>{{ s.year or "" }}</td>
                <td>{{ s.quality or "" }}</td>
                <td>
                  {% if s.languages %}
                    {{ s.languages | join(", ") }}
                  {% else %}
                    -
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>No series found yet. Use the form on the right to add a new series.</p>
      {% endif %}
    </div>

    <!-- RIGHT: Add new series form -->
    <div class="admin-form">
      <h2>Add new series</h2>
      <p class="text-muted">Create a new web series (seasons &amp; episodes will be added later).</p>

      <form action="/admin/series" method="post">
        <!-- Title -->
        <div class="form-group">
          <label for="title">Title</label>
          <input
            type="text"
            id="title"
            name="title"
            class="form-control"
            placeholder="Series title"
            required
          >
        </div>

        <!-- Year -->
        <div class="form-group">
          <label for="year">Year</label>
          <input
            type="text"
            id="year"
            name="year"
            class="form-control"
            placeholder="2024"
          >
        </div>

        <!-- Quality -->
        <div class="form-group">
          <label for="quality">Quality</label>
          <input
            type="text"
            id="quality"
            name="quality"
            class="form-control"
            placeholder="HD, 1080p, 4K"
          >
        </div>

        <!-- Category / Genre -->
        <div class="form-group">
          <label for="category">Category / Genre</label>
          <input
            type="text"
            id="category"
            name="category"
            class="form-control"
            placeholder="Action, Romance, Sci‑Fi + Fantasy"
          >
        </div>

        <!-- Poster image -->
        <div class="form-group">
          <label for="poster_path">Poster image URL</label>
          <input
            type="text"
            id="poster_path"
            name="poster_path"
            class="form-control"
            placeholder="/static/posters/my-series.jpg or https://..."
          >
        </div>

        <!-- Languages -->
        <div class="form-group">
          <label>Languages (select one or more)</label>
          <div class="language-grid">
            <label>
              <input type="checkbox" name="languages" value="Tamil">
              Tamil
            </label>
            <label>
              <input type="checkbox" name="languages" value="Telugu">
              Telugu
            </label>
            <label>
              <input type="checkbox" name="languages" value="Hindi">
              Hindi
            </label>
            <label>
              <input type="checkbox" name="languages" value="Malayalam">
              Malayalam
            </label>
            <label>
              <input type="checkbox" name="languages" value="Kannada">
              Kannada
            </label>
            <label>
              <input type="checkbox" name="languages" value="English">
              English
            </label>
          </div>
        </div>

        <!-- Short description -->
        <div class="form-group">
          <label for="description">Short description</label>
          <textarea
            id="description"
            name="description"
            class="form-control"
            rows="4"
            placeholder="Write a short synopsis of the series..."
          ></textarea>
        </div>

        <!-- Submit -->
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">
            Save series
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<style>
  .admin-page {
    padding: 16px;
  }

  .admin-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 16px;
  }

  .admin-grid {
    display: grid;
    grid-template-columns: 1.4fr 1fr;
    gap: 16px;
  }

  .admin-list, .admin-form {
    background: #111827;
    border-radius: 8px;
    padding: 16px;
    color: #e5e7eb;
  }

  .admin-form h2, .admin-list h2 {
    margin-top: 0;
  }

  .form-group {
    margin-bottom: 12px;
  }

  .form-group label {
    display: block;
    margin-bottom: 4px;
    font-size: 14px;
  }

  .form-control, textarea.form-control {
    width: 100%;
    padding: 8px 10px;
    border-radius: 4px;
    border: 1px solid #374151;
    background: #020617;
    color: #e5e7eb;
  }

  .form-control::placeholder,
  textarea.form-control::placeholder {
    color: #6b7280;
  }

  .language-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px 16px;
    font-size: 14px;
  }

  .language-grid label {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .form-actions {
    margin-top: 12px;
    text-align: right;
  }

  .btn {
    display: inline-block;
    padding: 8px 14px;
    border-radius: 4px;
    text-decoration: none;
    font-size: 14px;
    border: none;
    cursor: pointer;
  }

  .btn-primary {
    background: #2563eb;
    color: #ffffff;
  }

  .btn-secondary {
    background: #374151;
    color: #e5e7eb;
  }

  .alert {
    padding: 8px 12px;
    border-radius: 4px;
    background: #1d4ed8;
    color: #e5e7eb;
  }

  .table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
  }

  .table th,
  .table td {
    border-bottom: 1px solid #374151;
    padding: 6px 8px;
    text-align: left;
  }

  .table-striped tbody tr:nth-child(odd) {
    background: #020617;
  }

  @media (max-width: 900px) {
    .admin-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %}
