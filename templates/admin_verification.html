{% extends "base.html" %}

{% block content %}
<style>
    .verification-container {
        margin-top: 12px;
        padding: 16px;
    }
    
    .admin-header {
        background: rgba(15, 23, 42, 0.96);
        border-radius: 24px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        padding: 24px;
        margin-bottom: 24px;
    }
    
    .admin-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 8px;
        background: linear-gradient(135deg, #06b6d4, #3b82f6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .admin-subtitle {
        font-size: 13px;
        color: rgba(229, 231, 235, 0.7);
    }
    
    .admin-tabs {
        display: flex;
        gap: 0;
        margin-bottom: 24px;
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .admin-tab {
        padding: 12px 24px;
        font-weight: 700;
        text-decoration: none;
        font-size: 14px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        transition: all 0.2s;
        position: relative;
    }
    
    .admin-tab:first-child {
        border-radius: 12px 0 0 12px;
    }
    
    .admin-tab:last-child {
        border-radius: 0 12px 12px 0;
    }
    
    .admin-tab.movies, .admin-tab.series {
        background: rgba(15, 23, 42, 0.9);
        color: #e5e7eb;
        border: 1.5px solid rgba(148, 163, 184, 0.4);
    }
    
    .admin-tab.verification {
        background: linear-gradient(135deg, #06b6d4, #3b82f6);
        color: #020617;
        border: 1.5px solid rgba(148, 163, 184, 0.4);
    }
    
    .verification-list {
        display: grid;
        gap: 20px;
    }
    
    .verification-item {
        background: rgba(15, 23, 42, 0.96);
        border-radius: 16px;
        border: 1px solid rgba(148, 163, 184, 0.3);
        padding: 20px;
        display: grid;
        grid-template-columns: 120px 1fr auto;
        gap: 20px;
        align-items: start;
    }
    
    .verification-poster {
        width: 120px;
        height: 180px;
        border-radius: 8px;
        object-fit: cover;
        background: rgba(15, 23, 42, 0.8);
    }
    
    .verification-info h3 {
        margin: 0 0 12px 0;
        font-size: 18px;
        color: #e5e7eb;
    }
    
    .verification-meta {
        display: flex;
        gap: 16px;
        margin-bottom: 12px;
        font-size: 13px;
        color: rgba(229, 231, 235, 0.7);
    }
    
    .verification-meta span {
        display: flex;
        align-items: center;
        gap: 4px;
    }
    
    .verification-links {
        margin-top: 12px;
    }
    
    .verification-links a {
        display: inline-block;
        margin-right: 12px;
        padding: 6px 12px;
        border-radius: 8px;
        background: rgba(6, 182, 212, 0.1);
        border: 1px solid rgba(6, 182, 212, 0.5);
        color: #06b6d4;
        text-decoration: none;
        font-size: 12px;
    }
    
    .verification-actions {
        display: flex;
        gap: 12px;
        align-self: center;
    }
    
    .action-btn {
        padding: 10px 20px;
        border-radius: 12px;
        border: none;
        font-weight: 700;
        cursor: pointer;
        text-decoration: none;
        font-size: 14px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }
    
    .approve-btn {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        color: #020617;
    }
    
    .reject-btn {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        color: #020617;
    }
    
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: rgba(229, 231, 235, 0.6);
    }
    
    .empty-state p:first-child {
        font-size: 56px;
        margin-bottom: 16px;
    }
    
    .message {
        padding: 12px 16px;
        border-radius: 12px;
        margin-bottom: 16px;
        font-size: 14px;
    }
    
    .message.success {
        background: rgba(34, 197, 94, 0.1);
        border: 1px solid rgba(34, 197, 94, 0.5);
        color: #22c55e;
    }
</style>

<div class="verification-container">
    <div class="admin-header">
        <h1 class="admin-title">‚úÖ Admin - Verification Requests</h1>
        <p class="admin-subtitle">Review and approve/reject user-submitted movies & series</p>
    </div>
    
    {% if message %}
    <div class="message success">
        {{ message }}
    </div>
    {% endif %}
    
    <div class="admin-tabs">
        <a href="/admin/movies" class="admin-tab movies">üé¨ Movies</a>
        <a href="/admin/series" class="admin-tab series">üì∫ Series</a>
        <a href="/admin/verification" class="admin-tab verification">‚úÖ Verification</a>
    </div>
    
    {% if verifications %}
    <div class="verification-list">
        {% for verification in verifications %}
        <div class="verification-item">
            <img src="/static/{{ verification.poster_path }}" 
                 alt="{{ verification.title }}" 
                 class="verification-poster"
                 onerror="this.src='https://via.placeholder.com/120x180/1e293b/64748b?text=No+Poster'">
            
            <div class="verification-info">
                <h3>{{ verification.title }}</h3>
                
                <div class="verification-meta">
                    <span>üé¨ {{ verification.type|title }}</span>
                    <span>üåê {{ verification.language }}</span>
                    <span>üì∫ {{ verification.quality }}</span>
                    <span>üè∑Ô∏è {{ verification.category or "‚Äî" }}</span>
                    <span>üë§ {{ verification.submitted_by }}</span>
                </div>
                
                <div class="verification-links">
                    {% if verification.watch_url %}
                        <a href="{{ verification.watch_url }}" target="_blank">üëÅ Watch URL</a>
                    {% endif %}
                    {% if verification.download_url %}
                        <a href="{{ verification.download_url }}" target="_blank">‚¨á Download URL</a>
                    {% endif %}
                </div>
                
                {% if verification.qualities %}
                <div style="margin-top: 12px; font-size: 12px; color: #06b6d4;">
                    Quality links: {{ verification.qualities|length }} available
                </div>
                {% endif %}
            </div>
            
            <div class="verification-actions">
                <form method="post" action="/admin/verification/approve/{{ verification.id }}" style="display: inline;">
                    <button type="submit" class="action-btn approve-btn">‚úì Approve</button>
                </form>
                
                <form method="post" action="/admin/verification/reject/{{ verification.id }}" style="display: inline;">
                    <button type="submit" class="action-btn reject-btn" 
                            onclick="return confirm('Reject this submission?');">‚úó Reject</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p style="font-size: 56px; margin-bottom: 16px;">‚úÖ</p>
        <p>No pending verification requests!</p>
        <p style="font-size: 13px; margin-top: 8px;">All submissions have been reviewed.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
                        
