{% extends "base.html" %}

{% block content %}
<style>
    .admin-support-container {
        margin-top: 12px;
        padding: 16px;
    }
    
    .admin-support-header {
        background: rgba(15, 23, 42, 0.96);
        border-radius: 24px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        padding: 20px;
        margin-bottom: 16px;
    }
    
    .admin-support-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 8px;
    }
    
    .admin-support-subtitle {
        font-size: 13px;
        color: rgba(229, 231, 235, 0.7);
    }
    
    .support-messages-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
    
    .support-message-card {
        background: rgba(15, 23, 42, 0.96);
        border-radius: 16px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        padding: 16px;
    }
    
    .support-message-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 12px;
    }
    
    .support-message-user {
        flex: 1;
    }
    
    .support-message-name {
        font-size: 15px;
        font-weight: 600;
        margin-bottom: 4px;
    }
    
    .support-message-contact {
        font-size: 12px;
        color: rgba(229, 231, 235, 0.7);
    }
    
    .support-message-time {
        font-size: 12px;
        color: rgba(229, 231, 235, 0.6);
    }
    
    .support-message-body {
        font-size: 14px;
        line-height: 1.6;
        margin-bottom: 12px;
        padding: 12px;
        background: rgba(15, 23, 42, 0.5);
        border-radius: 12px;
    }
    
    .support-message-footer {
        display: flex;
        gap: 8px;
        align-items: center;
    }
    
    .support-status-badge {
        padding: 4px 12px;
        border-radius: 999px;
        font-size: 11px;
        font-weight: 500;
    }
    
    .status-pending {
        background: rgba(251, 191, 36, 0.2);
        color: #fbbf24;
        border: 1px solid rgba(251, 191, 36, 0.5);
    }
    
    .status-replied {
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
        border: 1px solid rgba(16, 185, 129, 0.5);
    }
    
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: rgba(229, 231, 235, 0.6);
    }
</style>

<div class="admin-support-container">
    <div class="admin-support-header">
        <div class="admin-support-title">üí¨ Support Messages</div>
        <div class="admin-support-subtitle">
            View and manage user support requests
        </div>
    </div>
    
    {% if messages and messages|length > 0 %}
    <div class="support-messages-list">
        {% for msg in messages %}
        <div class="support-message-card">
            <div class="support-message-header">
                <div class="support-message-user">
                    <div class="support-message-name">{{ msg.name }}</div>
                    <div class="support-message-contact">
                        {% if msg.telegram_username %}
                            üì± {{ msg.telegram_username }}
                        {% endif %}
                        {% if msg.email %}
                            | ‚úâÔ∏è {{ msg.email }}
                        {% endif %}
                    </div>
                </div>
                <div class="support-message-time">
                    {{ msg.timestamp.strftime('%b %d, %Y %I:%M %p') if msg.timestamp else 'N/A' }}
                </div>
            </div>
            
            <div class="support-message-body">
                {{ msg.message }}
            </div>
            
            <div class="support-message-footer">
                <span class="support-status-badge status-{{ msg.status }}">
                    {{ msg.status.upper() }}
                </span>
                <span style="font-size: 11px; color: rgba(229, 231, 235, 0.5);">
                    IP: {{ msg.ip_address or 'N/A' }}
                </span>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div style="font-size: 48px; margin-bottom: 16px;">üì≠</div>
        <div style="font-size: 16px; margin-bottom: 8px;">No support messages yet</div>
        <div style="font-size: 13px;">User messages will appear here</div>
    </div>
    {% endif %}
</div>
{% endblock %}
